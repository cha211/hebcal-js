/*
    Hebcal - A Jewish Calendar Generator

    https://github.com/hebcal/hebcal-js

    Licensed GPLv3
 */
!function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){function getCity(city){return city=city.split(/\s+/).map(function(w,i,c){return"washington dc"===c.join(" ").toLowerCase()&&1===i?w.toUpperCase():w[0].toUpperCase()+w.slice(1).toLowerCase()}).join(" "),cities[city]||[0,0,!1]}function listCities(){return Object.keys(cities)}var cities={Ashdod:[31.8,34.633,!0],Atlanta:[33.75,-84.383,!1],Austin:[30.266,-97.75,!1],Baghdad:[33.233,44.366,!1],"Beer Sheva":[31.25,34.783,!0],Berlin:[52.516,13.4,!1],Baltimore:[39.283,-76.6,!1],Bogota:[4.6,-74.083,!1],Boston:[42.333,-71.066,!1],"Buenos Aires":[-34.616,-58.4,!1],Buffalo:[42.883,-78.866,!1],Chicago:[41.833,-87.75,!1],Cincinnati:[39.1,-84.516,!1],Cleveland:[41.5,-81.683,!1],Dallas:[32.783,-96.8,!1],Denver:[39.733,-104.983,!1],Detroit:[42.333,-83.033,!1],Eilat:[29.55,34.95,!0],Gibraltar:[36.133,-5.35,!1],Haifa:[32.816,34.983,!0],Hawaii:[19.5,-155.5,!1],Houston:[29.766,-95.366,!1],Jerusalem:[31.783,35.233,!0],Johannesburg:[-26.166,28.033,!1],Kiev:[50.466,30.483,!1],"La Paz":[-16.5,-68.15,!1],Livingston:[40.283,-74.3,!1],London:[51.5,-.166,!1],"Los Angeles":[34.066,-118.25,!1],Miami:[25.766,-80.2,!1],Melbourne:[-37.866,145.133,!1],"Mexico City":[19.4,-99.15,!1],Montreal:[45.5,-73.6,!1],Moscow:[55.75,37.7,!1],"New York":[40.716,-74.016,!1],Omaha:[41.266,-95.933,!1],Ottawa:[45.7,-76.183,!1],"Panama City":[8.966,-79.533,!1],Paris:[48.866,2.333,!1],"Petach Tikvah":[32.083,34.883,!0],Philadelphia:[39.95,-75.166,!1],Phoenix:[33.45,-112.066,!1],Pittsburgh:[40.433,-80,!1],"Saint Louis":[38.633,-90.2,!1],"Saint Petersburg":[59.883,30.25,!1],"San Francisco":[37.783,-122.416,!1],Seattle:[47.6,-122.333,!1],Sydney:[-33.916,151.283,!1],"Tel Aviv":[32.083,34.766,!0],Tiberias:[32.966,35.533,!0],Toronto:[43.633,-79.4,!1],Vancouver:[49.266,-123.116,!1],"White Plains":[41.033,-73.75,!1],"Washington DC":[38.916,-77,!1]};exports.getCity=getCity,exports.listCities=listCities,exports.addCity=function(city,info){if(!Array.isArray(info))throw new TypeError("adding non-array city");if(5==info.length){var i=info.slice();info=[],info[0]=(60*i[0]+i[1])/60,info[1]=(60*i[2]+i[3])/60,info[2]=i[4]}if(3!=info.length)throw new TypeError("length of city array is not 3");city=city.split(/\s+/).map(function(w){return w[0].toUpperCase()+w.slice(1).toLowerCase()}).join(" "),cities[city]=info},exports.nearest=function(lat,lon){if(Array.isArray(lat)&&(lat=(60*lat[0]+lat[1])/60),Array.isArray(lon)&&(lon=(60*lon[0]+lon[1])/60),"number"!=typeof lat)throw new TypeError("incorrect lat type passed to nearest()");if("number"!=typeof lon)throw new TypeError("incorrect long type passed to nearest()");return listCities().map(function(city){var i=getCity(city);return{name:city,dist:Math.sqrt(Math.pow(Math.abs(i[0]-lat),2)+Math.pow(Math.abs(i[1]-lon),2))}}).reduce(function(close,city){return close.dist<city.dist?close:city}).name}},{}],2:[function(require,module,exports){function ready(){Hebcal.ready=!0,finished=Hebcal.events.emit("ready")}window.Hebcal=require("..");var finished=!1,warn="undefined"!=typeof console&&(console.warn||console.log)||function(){};Hebcal.events.on("newListener",function(e){"ready"===e&&!finished&&Hebcal.ready&&ready()}),Object.defineProperty(Hebcal,"onready",{configurable:!0,get:function(){return warn("Getting deprecated property Hebcal.onready"),Hebcal.events.listeners("ready")[0]},set:function(func){warn("Setting deprecated property Hebcal.onready; use Hebcal.events.on('ready', func) instead"),Hebcal.events.on("ready",func)}}),navigator.geolocation?(Hebcal.ready=!1,navigator.geolocation.getCurrentPosition(function(p){Hebcal.defaultLocation=[p.coords.latitude,p.coords.longitude],ready()},ready)):ready()},{"..":7}],3:[function(require,module,exports){function LEAP(x){return(1+7*x)%19<7}function hebElapsedDays(hYear){var m_elapsed=235*Math.floor((hYear-1)/19)+12*((hYear-1)%19)+Math.floor(((hYear-1)%19*7+1)/19),p_elapsed=204+793*(m_elapsed%1080),h_elapsed=5+12*m_elapsed+793*Math.floor(m_elapsed/1080)+Math.floor(p_elapsed/1080),parts=p_elapsed%1080+1080*(h_elapsed%24),day=1+29*m_elapsed+Math.floor(h_elapsed/24),alt_day=day+(parts>=19440||2==day%7&&parts>=9924&&!LEAP(hYear)||1==day%7&&parts>=16789&&LEAP(hYear-1));return alt_day+(alt_day%7===0||alt_day%7==3||alt_day%7==5)}function daysInYear(year){return hebElapsedDays(year+1)-hebElapsedDays(year)}function lngChesh(year){return daysInYear(year)%10==5}function shrtKis(year){return daysInYear(year)%10==3}function monthFromName(c){switch(c.toLowerCase()[0]){case"n":case"נ":return"o"==c.toLowerCase()[1]?0:months.NISAN;case"i":return months.IYYAR;case"e":return months.ELUL;case"c":case"ח":return months.CHESHVAN;case"k":case"כ":return months.KISLEV;case"s":switch(c.toLowerCase()[1]){case"i":return months.SIVAN;case"h":return months.SHVAT;default:return 0}case"t":switch(c.toLowerCase()[1]){case"a":return months.TAMUZ;case"i":return months.TISHREI;case"e":return months.TEVET}break;case"a":switch(c.toLowerCase()[1]){case"v":return months.AV;case"d":return/(1|[^i]i|a|א)$/i.test(c)?months.ADAR_I:months.ADAR_II}break;case"ס":return months.SIVAN;case"ש":return months.SHVAT;case"א":switch(c.toLowerCase()[1]){case"ב":return months.AV;case"ד":return/(2|ii|b|ב)$/i.test(c)?months.ADAR_I:months.ADAR_II;case"י":return months.IYYAR;case"ל":return months.ELUL}break;case"ת":switch(c.toLowerCase()[1]){case"מ":return months.TAMUZ;case"ש":return months.TISHREI}}return 0}function filter(self,fun,thisp){if(null===self)throw new TypeError("self is null");switch(typeof fun){case"function":break;case"string":case"number":return self[fun];case"boolean":fun=fun?function(v){return v}:function(v){return!v};break;case"object":var funOrig=fun;if(fun instanceof RegExp){fun=function(v){return funOrig.test(v)};break}if(Array.isArray(fun)){fun=function(v,k){return funOrig.indexOf(k)>-1};break}default:throw new TypeError("fun is not a supported type")}var res={},t=Object(self);for(var i in t)if(t.hasOwnProperty(i)){var val=t[i];if(fun.call(thisp,val,i,t)){var props=Object.getOwnPropertyDescriptor(t,i);props.value=val,Object.defineProperty(res,i,props)}}if(Array.isArray(self)||"string"==typeof self){var arr=[];for(i in res)arr[Number(i)]=res[i];res=arr.filter(function(v){return v}),"string"==typeof self&&(res=res.join(""))}return res}var gematriya=require("gematriya"),charCodeAt="charCodeAt",months=exports.months={NISAN:1,IYYAR:2,SIVAN:3,TAMUZ:4,AV:5,ELUL:6,TISHREI:7,CHESHVAN:8,KISLEV:9,TEVET:10,SHVAT:11,ADAR_I:12,ADAR_II:13},monthNames=[["",0,""],["Nisan",0,"ניסן"],["Iyyar",0,"אייר"],["Sivan",0,"סיון"],["Tamuz",0,"תמוז"],["Av",0,"אב"],["Elul",0,"אלול"],["Tishrei",0,"תשרי"],["Cheshvan",0,"חשון"],["Kislev",0,"כסלו"],["Tevet",0,"טבת"],["Sh'vat",0,"שבט"]];exports.monthNames=[monthNames.concat([["Adar",0,"אדר"],["Nisan",0,"ניסן"]]),monthNames.concat([["Adar 1",0,"אדר א'"],["Adar 2",0,"אדר ב'"],["Nisan",0,"ניסן"]])],exports.days={SUN:0,MON:1,TUE:2,WED:3,THU:4,FRI:5,SAT:6},exports.LANG=function(str,opts){return"h"==opts&&str[2]||"a"==opts&&str[1]||str[0]},exports.LEAP=LEAP,exports.MONTH_CNT=function(x){return 12+LEAP(x)},exports.daysInMonth=function(month,year){return 30-(month==months.IYYAR||month==months.TAMUZ||month==months.ELUL||month==months.TEVET||month==months.ADAR_II||month==months.ADAR_I&&!LEAP(year)||month==months.CHESHVAN&&!lngChesh(year)||month==months.KISLEV&&shrtKis(year))},exports.monthNum=function(month){return"number"==typeof month?month:month[charCodeAt](0)>=1488&&month[charCodeAt](0)<=1514&&/('|")/.test(month)?gematriya(month):month[charCodeAt](0)>=48&&month[charCodeAt](0)<=57?parseInt(month,10):monthFromName(month)},exports.dayYearNum=function(str){return"number"==typeof str?str:str[charCodeAt](0)>=1488&&str[charCodeAt](0)<=1514?gematriya(str,!0):parseInt(str,10)},exports.hebElapsedDays=hebElapsedDays,exports.daysInYear=daysInYear,exports.lngChesh=lngChesh,exports.shrtKis=shrtKis,exports.monthFromName=monthFromName,exports.dayOnOrBefore=function(day_of_week,absdate){return absdate-(absdate-day_of_week)%7},exports.map=function(self,fun,thisp){if(null===self||"function"!=typeof fun)throw new TypeError;var t=Object(self),res={};for(var i in t)t.hasOwnProperty(i)&&(res[i]=fun.call(thisp,t[i],i,t));if(Array.isArray(self)||"string"==typeof self){var arr=[];for(i in res)arr[Number(i)]=res[i];res=filter(arr,!0),"string"==typeof self&&(res=res.join(""))}return res},exports.filter=filter,exports.range=function(start,end,step){step=step||1,step<0&&(step=0-step);var arr=[],i=start;if(start<end)for(;i<=end;i+=step)arr.push(i);else for(;i>=end;i-=step)arr.push(i);return arr}},{gematriya:10}],4:[function(require,module,exports){var c=require("./common"),greg=require("./greg"),gematriya=require("gematriya"),shas=[["Berachot","Berachos","ברכות",64],["Shabbat","Shabbos","שבת",157],["Eruvin","Eruvin","עירובין",105],["Pesachim",0,"פסחים",121],["Shekalim",0,"שקלים",22],["Yoma",0,"יומא",88],["Sukkah",0,"סוכה",56],["Beitzah",0,"ביצה",40],["Rosh Hashana",0,"ראש השנה",35],["Taanit","Taanis","תענית",31],["Megillah",0,"מגילה",32],["Moed Katan",0,"מועד קטן",29],["Chagigah",0,"חגיגה",27],["Yevamot","Yevamos","יבמות",122],["Ketubot","Kesubos","כתובות",112],["Nedarim",0,"נדרים",91],["Nazir",0,"נזיר",66],["Sotah",0,"סוטה",49],["Gitin",0,"גיטין",90],["Kiddushin",0,"קידושין",82],["Baba Kamma",0,"בבא קמא",119],["Baba Metzia",0,"בבא מציעא",119],["Baba Batra","Baba Basra","בבא בתרא",176],["Sanhedrin",0,"סנהדרין",113],["Makkot","Makkos","מכות",24],["Shevuot","Shevuos","שבועות",49],["Avodah Zarah",0,"עבודה זרה",76],["Horayot","Horayos","הוריות",14],["Zevachim",0,"זבחים",120],["Menachot","Menachos","מנחות",110],["Chullin",0,"חולין",142],["Bechorot","Bechoros","בכורות",61],["Arachin",0,"ערכין",34],["Temurah",0,"תמורה",34],["Keritot","Kerisos","כריתות",28],["Meilah",0,"מעילה",22],["Kinnim",0,"קנים",4],["Tamid",0,"תמיד",10],["Midot","Midos","מדות",4],["Niddah",0,"נדה",73]].map(function(m){return{name:m.slice(0,3),blatt:m[3]}});exports.dafyomi=function(gregdate){var cno,dno,osday,nsday,total,count,j,cday,blatt,dafcnt=40;if(!(gregdate instanceof Date))throw new TypeError("non-date given to dafyomi");if(osday=greg.greg2abs(new Date(1923,8,11)),nsday=greg.greg2abs(new Date(1975,5,24)),cday=greg.greg2abs(gregdate),cday<osday)return{name:[],blatt:0};for(cday>=nsday?(cno=8+(cday-nsday)/2711,dno=(cday-nsday)%2711):(cno=1+(cday-osday)/2702,dno=(cday-osday)%2702),total=blatt=0,count=-1,cno<=7?shas[4].blatt=13:shas[4].blatt=22,j=0;j<dafcnt;){if(count++,total=total+shas[j].blatt-1,dno<total){switch(blatt=shas[j].blatt+1-(total-dno),count){case 36:blatt+=21;break;case 37:blatt+=24;break;case 38:blatt+=33}j=1+dafcnt}j++}return{name:shas[count].name,blatt:blatt}},exports.dafname=function(daf,o){return c.LANG(daf.name,o)+" "+("h"===o?gematriya(daf.blatt):daf.blatt)}},{"./common":3,"./greg":5,gematriya:10}],5:[function(require,module,exports){function dayOfYear(date){if(!date instanceof Date)throw new TypeError("Argument to greg.dayOfYear not a Date");var doy=date.getDate()+31*date.getMonth();return date.getMonth()>1&&(doy-=floor((4*(date.getMonth()+1)+23)/10),LEAP(date.getFullYear())&&doy++),doy}function LEAP(year){return!(year%4||!(year%100)&&year%400)}var floor=Math.floor,t0t1=[30,31],tMonthLengths=[0,31,28,31].concat(t0t1,t0t1,31,t0t1,t0t1),monthLengths=[tMonthLengths.slice()];tMonthLengths[2]++,monthLengths.push(tMonthLengths),exports.daysInMonth=function(month,year){return monthLengths[+LEAP(year)][month]},exports.monthNames=["","January","February","March","April","May","June","July","August","September","October","November","December"],exports.lookupMonthNum=function(month){return new Date(month+" 1").getMonth()+1},exports.dayOfYear=dayOfYear,exports.LEAP=LEAP,exports.greg2abs=function(date){var year=date.getFullYear()-1;return dayOfYear(date)+365*year+(floor(year/4)-floor(year/100)+floor(year/400))},exports.abs2greg=function(theDate){var d0=theDate-1,n400=floor(d0/146097),d1=floor(d0%146097),n100=floor(d1/36524),d2=d1%36524,n4=floor(d2/1461),d3=d2%1461,n1=floor(d3/365),day=d3%365+1,year=400*n400+100*n100+4*n4+n1;return 4==n100||4==n1?new Date(year,11,31):new Date(new Date(++year,0,day).setFullYear(year))}},{}],6:[function(require,module,exports){function HDate(day,month,year){var me=this;switch(arguments.length){case 0:return new HDate(new Date);case 1:if("undefined"==typeof day)return new HDate;if(day instanceof Date){var d=abs2hebrew(greg.greg2abs(day));return d}if(day instanceof HDate){var d=new HDate(day[getDate](),day[getMonth](),day[getFullYear]());return d.il=day.il,d.setLocation(d.lat,d.long),d}if("string"==typeof day){switch(day.toLowerCase().trim()){case"today":return new HDate;case"yesterday":return(new HDate).prev();case"tomorrow":return(new HDate).next()}if(/\s/.test(day)){var s=day.split(/\s+/);if(2==s.length)return new HDate(s[0],s[1]);if(3==s.length)return new HDate(s[0],s[1],s[2]);if(4==s.length)return/i/i.test(s[2])&&(s[2]=s[2].length),new HDate(s[0],s[1]+s[2],s[3])}}else if("number"==typeof day)return abs2hebrew(day);throw new TypeError("HDate called with bad argument");case 2:return new HDate(day,month,(new HDate)[getFullYear]());case 3:me.day=me.month=1,me.year=c.dayYearNum(year),me.setMonth(c.monthNum(month)),me.setDate(c.dayYearNum(day));break;default:throw new TypeError("HDate called with bad arguments")}return me.setLocation.apply(me,HDate.defaultLocation)}function fix(date){fixMonth(date),fixDate(date)}function fixDate(date){date.day<1&&(date.month==TISHREI&&(date.year-=1),date.day+=daysInMonth(date.month,date.year),date.month-=1,fix(date)),date.day>daysInMonth(date.month,date.year)&&(date.month==months.ELUL&&(date.year+=1),date.day-=daysInMonth(date.month,date.year),date.month+=1,fix(date)),fixMonth(date)}function fixMonth(date){date.month!=months.ADAR_II||date.isLeapYear()||(date.month-=1,fix(date)),date.month<1&&(date.month+=MONTH_CNT(date.year),date.year-=1,fix(date)),date.month>MONTH_CNT(date.year)&&(date.month-=MONTH_CNT(date.year),date.year+=1,fix(date))}function hebrew2abs(d){var m,tempabs=d[getDate](),year=d[getFullYear]();if(d[getMonth]()<TISHREI){for(m=TISHREI;m<=MONTH_CNT(year);m++)tempabs+=daysInMonth(m,year);for(m=months.NISAN;m<d[getMonth]();m++)tempabs+=daysInMonth(m,year)}else for(m=TISHREI;m<d[getMonth]();m++)tempabs+=daysInMonth(m,year);return c.hebElapsedDays(year)-1373429+tempabs}function abs2hebrew(d){var hebdate,gregdate,month,year,mmap=[months.KISLEV,months.TEVET,months.SHVAT,months.ADAR_I,months.NISAN,months.IYYAR,months.SIVAN,months.TAMUZ,TISHREI,TISHREI,TISHREI,months.CHESHVAN];if(d>=10555144)throw new RangeError("parameter to abs2hebrew "+d+" out of range");for(gregdate=greg.abs2greg(d),hebdate=new HDate(1,TISHREI,year=3760+gregdate[getFullYear]());d>=hebrew2abs(hebdate.setFullYear(year+1));)year++;for(month=year>4634&&year<10666?mmap[gregdate[getMonth]()]:TISHREI;d>hebrew2abs(hebdate=new HDate(daysInMonth(month,year),month,year));)month=month%MONTH_CNT(year)+1;return hebdate.setLocation.apply(hebdate.setDate(d-hebrew2abs(hebdate.setDate(1))+1),HDate.defaultLocation)}function suntime(hdate){return suncalc.getTimes(hdate.greg(),hdate.lat,hdate.long)}function hourOffset(hdate,hours){return new Date(hdate.sunrise()[getTime]()+hdate[hour]()*hours)}function onOrBefore(day,t,offset){return new HDate(dayOnOrBefore(day,t[abs]()+offset))}var c=require("./common"),greg=require("./greg"),suncalc=require("suncalc"),cities=require("./cities"),gematriya=require("gematriya");suncalc.addTime(-16.1,"alot_hashachar",0),suncalc.addTime(-11.5,"misheyakir",0),suncalc.addTime(-10.2,"misheyakir_machmir",0),suncalc.addTime(-8.5,0,"tzeit");var getFullYear="getFullYear",getMonth="getMonth",getDate="getDate",getTime="getTime",abs="abs",hour="hour",months=c.months,TISHREI=months.TISHREI,MONTH_CNT=c.MONTH_CNT,daysInMonth=c.daysInMonth,dayOnOrBefore=c.dayOnOrBefore,prototype=HDate.prototype;HDate.defaultLocation=[0,0],Object.defineProperty(HDate,"defaultCity",{enumerable:!0,configurable:!0,get:function(){return cities.nearest(HDate.defaultLocation[0],HDate.defaultLocation[1])},set:function(city){HDate.defaultLocation=cities.getCity(city).slice(0,2)}}),prototype[getFullYear]=function(lang){return lang&&"h"==lang?gematriya(this.year):this.year},prototype.isLeapYear=function(){return c.LEAP(this.year)},prototype[getMonth]=function(){return this.month},prototype.getTishreiMonth=function(){var nummonths=MONTH_CNT(this[getFullYear]());return(this[getMonth]()+nummonths-6)%nummonths||nummonths},prototype.daysInMonth=function(){return daysInMonth(this[getMonth](),this[getFullYear]())},prototype[getDate]=function(lang){return lang&&"h"==lang?gematriya(this.day):this.day},prototype.getDay=function(lang){return lang&&"h"==lang?gematriya(this.greg().getDay()):this.greg().getDay()},prototype.setFullYear=function(year){return this.year=year,fix(this),this},prototype.setMonth=function(month){return this.month=c.monthNum(month),fix(this),this},prototype.setTishreiMonth=function(month){return this.setMonth((month+6)%MONTH_CNT(this[getFullYear]())||13)},prototype.setDate=function(date){return this.day=date,fix(this),this},prototype.greg=function(){return greg.abs2greg(hebrew2abs(this))},prototype.gregEve=function(){return this.prev().sunset()},prototype[abs]=function(){return hebrew2abs(this)},prototype.toString=function(o){return c.LANG([this[getDate](),null,gematriya(this[getDate]())],o)+" "+this.getMonthName(o)+" "+c.LANG([this[getFullYear](),null,gematriya(this[getFullYear]())],o)},prototype.getMonthName=function(o){return c.LANG(c.monthNames[+this.isLeapYear()][this[getMonth]()],o)},prototype.setCity=function(city){return this.setLocation(cities.getCity(city))},prototype.setLocation=function(lat,lon){if("object"!=typeof lat||Array.isArray(lat)||(lon=lat.long,lat=lat.lat),Array.isArray(lat)&&"undefined"==typeof lon&&(lon=lat[0],lat=lat[1]),Array.isArray(lat)&&(lat=(60*lat[0]+lat[1])/60),Array.isArray(lon)&&(lon=(60*lon[0]+lon[1])/60),"number"!=typeof lat)throw new TypeError("incorrect lat type passed to HDate.setLocation()");if("number"!=typeof lon)throw new TypeError("incorrect long type passed to HDate.setLocation()");return this.lat=lat,this.long=lon,this.il=cities.getCity(cities.nearest(lat,lon))[2],this},prototype.sunrise=function(){return suntime(this).sunrise},prototype.sunset=function(){return suntime(this).sunset},prototype[hour]=function(){return(this.sunset()-this.sunrise())/12},prototype.hourMins=function(){return this[hour]()/6e4},prototype.nightHour=function(){return(this.sunrise()-this.gregEve())/12},prototype.nightHourMins=function(){return this.nightHour()/6e4};var zemanim={chatzot:function(hdate){return hourOffset(hdate,6)},chatzot_night:function(hdate){return new Date(hdate.sunrise()[getTime]()-6*hdate.nightHour())},alot_hashachar:function(hdate){return suntime(hdate).alot_hashachar},alot_hashacher:function(hdate){return suntime(hdate).alot_hashachar},misheyakir:function(hdate){return suntime(hdate).misheyakir},misheyakir_machmir:function(hdate){return suntime(hdate).misheyakir_machmir},sof_zman_shma:function(hdate){return hourOffset(hdate,3)},sof_zman_tfilla:function(hdate){return hourOffset(hdate,4)},mincha_gedola:function(hdate){return hourOffset(hdate,6.5)},mincha_ketana:function(hdate){return hourOffset(hdate,9.5)},plag_hamincha:function(hdate){return hourOffset(hdate,10.75)},tzeit:function(hdate){return suntime(hdate).tzeit},neitz_hachama:function(hdate){return hdate.sunrise()},shkiah:function(hdate){return hdate.sunset()}};prototype.getZemanim=function(){return c.map(zemanim,function(z){return z(this)},this)},HDate.addZeman=function(zeman,func){zemanim[zeman]=func},prototype.next=function(){return abs2hebrew(this.abs()+1).setLocation(this.lat,this.long)},prototype.prev=function(){return abs2hebrew(this.abs()-1).setLocation(this.lat,this.long)},prototype.isSameDate=function(other){return other instanceof HDate&&(other[getFullYear]()==-1&&(other=new HDate(other).setFullYear(this[getFullYear]())),this[abs]()==other[abs]())},prototype.before=function(day){return onOrBefore(day,this,-1)},prototype.onOrBefore=function(day){return onOrBefore(day,this,0)},prototype.nearest=function(day){return onOrBefore(day,this,3)},prototype.onOrAfter=function(day){return onOrBefore(day,this,6)},prototype.after=function(day){return onOrBefore(day,this,7)},module.exports=HDate},{"./cities":1,"./common":3,"./greg":5,gematriya:10,suncalc:11}],7:[function(require,module,exports){function getset(g,s){return{enumerable:!0,configurable:!0,get:g,set:s}}function extend(base,into){for(var i in into)base[i]=into[i];return base}function Hebcal(year,month){var me=this;if(year||(year=(new HDate)[getFullYear]()),"number"!=typeof year)throw new TE("year to Hebcal() is not a number");if(me.year=year,!month)return new Hebcal(year,c.range(1,c.MONTH_CNT(year)));if("string"==typeof month&&(month=c.monthFromName(month)),"number"==typeof month&&(month=[month]),!Array.isArray(month))throw new TE("month to Hebcal is not a valid type");me.months=month[map](function(i){var m=new Month(i,year);return defProp(m,"__year",{configurable:!0,writable:!0,value:me}),m}),me.holidays=holidays.year(year),me[length]=c.daysInYear(year),defProp(me,"il",getset(function(){return me[getMonth](1).il},function(il){me.months.forEach(function(m){m.il=il})})),defProp(me,"lat",getset(function(){return me[getMonth](1).lat},function(lat){me.months.forEach(function(m){m.lat=lat})})),defProp(me,"long",getset(function(){return me[getMonth](1).long},function(lon){me.months.forEach(function(m){m.long=lon})}))}function Month(month,year){var me=this;if(month=c.monthNum(month),"number"!=typeof month)throw new TE("month to Hebcal.Month is not a valid type");if("number"!=typeof year)throw new TE("year to Hebcal.Month is not a number");return me.month=month,me.year=year,me.days=c.range(1,c.daysInMonth(month,year))[map](function(i){var d=new HDate(i,month,year);return defProp(d,"__month",{configurable:!0,writable:!0,value:me}),d}),me[length]=me.days[length],me.holidays=c.filter(holidays.year(year),function(h){return h[0].date[getMonth]()==month}),defProp(me,"il",getset(function(){return me[getDay](1).il},function(il){me.days.forEach(function(d){d.il=il})})),defProp(me,"lat",getset(function(){return me[getDay](1).lat},function(lat){me.days.forEach(function(d){d.lat=lat})})),defProp(me,"long",getset(function(){return me[getDay](1).long},function(lon){me.days.forEach(function(d){d.long=lon})})),me}function GregYear(year,month){var me=this;if(year||(year=(new Date)[getFullYear]()),"string"==typeof year){var d=new Date(year);return month=year.indexOf(" ")+1||year.indexOf("-")+1||year.indexOf("/")+1?d[getMonth]()+1:c.range(1,12),new GregYear(d[getFullYear](),month)}if("number"!=typeof year)throw new TE("year to Hebcal.GregYear() is not a number");if(me.year=year,!month)return new GregYear(year,c.range(1,12));if("string"==typeof month&&(month=greg.lookupMonthName(month)),"number"==typeof month&&(month=[month]),!Array.isArray(month))throw new TE("month to Hebcal.GregYear() is not a valid type");return me.months=month[map](function(i){var m=new GregMonth(i,year);return defProp(m,"__year",{configurable:!0,writable:!0,value:me}),m}),me.hebyears=[].concat.apply([],me.months[map](function(m){return m.hebmonths[map](function(hm){return hm.year})})).filter(function(val,i,arr){return arr.indexOf(val)===i}),me.holidays=c.filter(holidays.year(me.hebyears[0]),function(h){return h[0].date.greg()[getFullYear]()===year&&me.months.filter(function(m){return m.month===h[0].date.greg()[getMonth]()+1})[length]}),me.hebyears[1]&&extend(me.holidays,c.filter(holidays.year(me.hebyears[1]),function(h){return h[0].date.greg()[getFullYear]()===year&&me.months.filter(function(m){return m.month===h[0].date.greg()[getMonth]()+1})[length]})),me[length]=365+greg.LEAP(year),defProp(me,"il",getset(function(){return me[getMonth](1).il},function(il){me.months.forEach(function(m){m.il=il})})),defProp(me,"lat",getset(function(){return me[getMonth](1).lat},function(lat){me.months.forEach(function(m){m.lat=lat})})),defProp(me,"long",getset(function(){return me[getMonth](1).long},function(lon){me.months.forEach(function(m){m.long=lon})})),me}function GregMonth(month,year){var me=this;if("string"==typeof month&&(month=greg.lookupMonthNum(month)),"number"!=typeof month)throw new TE("month to Hebcal.GregMonth is not a valid type");if("number"!=typeof year)throw new TE("year to Hebcal.GregMonth is not a number");return me.year=year,me.month=month,me.days=c.range(1,greg.daysInMonth(month,year))[map](function(i){var d=new HDate(new Date(year,month-1,i));return defProp(d,"__gregmonth",{configurable:!0,writable:!0,value:me}),d}),me[length]=me.days[length],me.hebmonths=[{month:me[getDay](1)[getMonth](),year:me[getDay](1)[getFullYear]()},{month:me[getDay](-1)[getMonth](),year:me[getDay](-1)[getFullYear]()}].filter(function(val,i,arr){return 0===i||val.month!=arr[0].month}),defProp(me,"il",getset(function(){return me[getDay](1).il},function(il){me.days.forEach(function(d){d.il=il})})),defProp(me,"lat",getset(function(){return me[getDay](1).lat},function(lat){me.days.forEach(function(d){d.lat=lat})})),defProp(me,"long",getset(function(){return me[getDay](1).long},function(lon){me.days.forEach(function(d){d.long=lon})})),me}var c=require("./common"),HDate=require("./hdate"),holidays=require("./holidays"),Sedra=require("./sedra"),dafyomi=require("./dafyomi"),cities=require("./cities"),greg=require("./greg"),EventEmitter=require("events").EventEmitter,gematriya=require("gematriya"),defProp=Object.defineProperty,TE=TypeError,find="find",strings="strings",getYearObject="getYearObject",map="map",getDay="getDay",getMonth="getMonth",getFullYear="getFullYear",isLeapYear="isLeapYear",length="length",next="next",prev="prev",months=c.months,TISHREI=months.TISHREI,NISAN=months.NISAN,HebcalProto=Hebcal.prototype,MonthProto=Month.prototype,GregYearProto=GregYear.prototype,GregMonthProto=GregMonth.prototype,HDateProto=HDate.prototype;HebcalProto[isLeapYear]=HDateProto[isLeapYear],HebcalProto.setCity=function(city){return this.months.forEach(function(m){m.setCity(city)}),this},HebcalProto.setLocation=function(lat,lon){return this.months.forEach(function(m){m.setLocation(lat,lon)}),this},HebcalProto[next]=function(){return new Hebcal(this.year+1)},HebcalProto[prev]=function(){return new Hebcal(this.year-1)},HebcalProto[getMonth]=function(month){var months=this.months;return month=c.monthNum(month),month>this.months[length]?this[next]()[getMonth](month-months[length]):months[month>0?month-1:months[length]+month]},HebcalProto[getDay]=function(day){var me=this;if(day>me[length])return null;if(day<0)return me[getDay](me[length]-day);var rosh=me[find](29,months.ELUL)[0].abs()+1-me[find](1,NISAN)[0].abs();return day<=rosh?me[getMonth](NISAN)[getDay](day):me[getMonth](TISHREI)[getDay](day-rosh)},HebcalProto.days=function(){return[].concat.apply([],this.months[map](function(m){return m.days}))},HebcalProto[map]=function(){return[][map].apply(this.days(),arguments)},HebcalProto.filter=function(){return[].filter.apply(this.days(),arguments)},HebcalProto.addHoliday=function(holiday){if(!(holiday instanceof holidays.Event))throw new TE("non-Event passed to addHoliday()");return this.holidays.add(holiday),this},HebcalProto.findParsha=function(parsha,o){var langs=o?[o]:["s","a","h"],days=this.filter(function(d){return Math.max.apply(null,langs.map(function(l){return d.getSedra(l).indexOf(parsha)+1}))});return days[days[length]-1]},HebcalProto.findSedra=HebcalProto.findParsha,HebcalProto[find]=function find_f(day,month){var me=this;if(1===arguments[length]){if("string"==typeof day)return find_f[strings].call(me,day);if(Array.isArray(day))return[].concat.apply([],day[map](function(d){return me[find][Array.isArray(d)?"apply":"call"](me,d)}));if(day instanceof HDate)return me[find](day.getDate(),day[getMonth]());if(day instanceof Date)return me[find](new HDate(day))}else if(2==arguments[length]){if(month instanceof Month)return month[find](day);if(Array.isArray(month))return[].concat.apply([],month[map](function(m){return me[find](day,m)}));if("string"==typeof month)return me[find](day,c.monthNum(month));if("number"==typeof month)return me[find](day,me[getMonth](month))}return[]},HebcalProto[find][strings]=function strings(str){var split=str.split(/\s+/),func=strings[str.replace(/\s/g,"_").toLowerCase()];if(!split[length])return[];if(func)return func.call(this);try{return this[find](new HDate(str))}catch(e){return split[length]-1?this[find].apply(this,split):[]}},HebcalProto[find][strings].rosh_chodesh=function(){return this[find]("Rosh Chodesh",c.range(1,this.months[length]))},HebcalProto[find][strings].holidays=function(){return[].concat.apply([],this.holidays[map](function(h){return this[find](h.date)},this))},HebcalProto[find][strings].omer=function(){return this[find](c.range(16,64),NISAN)},HebcalProto[find][strings].today=function(){return this[find](new HDate)},HebcalProto[find][strings].yesterday=function(){return[this[find]("today")[0][prev]()]},HebcalProto[find][strings].tomorrow=function(){return[this[find]("today")[0][next]()]},HebcalProto[find][strings].pesach=function(){return this[find](c.range(15,23-this.il),NISAN)},HebcalProto[find][strings].sukkot=function(){return this[find](c.range(15,24-this.il),TISHREI)},HebcalProto[find][strings].succot=HebcalProto[find][strings].succos=HebcalProto[find][strings].sukkos=HebcalProto[find][strings].sukkot,HebcalProto[find][strings].shavuot=function(){return this[find](c.range(6,7-this.il),months.SIVAN)},HebcalProto[find][strings].shavuos=HebcalProto[find][strings].shavuot,HebcalProto[find][strings].rosh_hashana=function(){return this[find](c.range(1,2),TISHREI)},HebcalProto[find][strings].rosh_hashanah=HebcalProto[find][strings].rosh_hashana,Hebcal.addZeman=HDate.addZeman,Hebcal.cities=cities,Hebcal.range=c.range,Hebcal.gematriya=gematriya,Hebcal.holidays=c.filter(holidays,["masks","Event"]),Hebcal.parshiot=Sedra.parshiot,Hebcal.LANGUAGE=c.LANG,Hebcal[map]=c[map],Hebcal.filter=c.filter,defProp(Hebcal,"defaultLocation",getset(function(){return HDate.defaultLocation},function(loc){Hebcal.events.emit("locationChange",HDate.defaultLocation),HDate.defaultLocation=loc})),defProp(Hebcal,"defaultCity",getset(function(){return HDate.defaultCity},function(city){Hebcal.defaultLocation=cities.getCity(city).slice(0,2)})),defProp(Hebcal,"candleLighting",getset(function(){return holidays.Event.candleLighting},function(mins){holidays.Event.candleLighting=mins})),defProp(Hebcal,"havdalah",getset(function(){return holidays.Event.havdalah},function(mins){holidays.Event.havdalah=mins})),Hebcal.Month=Month,MonthProto[isLeapYear]=HDateProto[isLeapYear],MonthProto[prev]=function(){var me=this,year=me[getYearObject]();return 1===me.month?year[getMonth](-1):me.month===TISHREI?year[prev]()[getMonth](months.ELUL):year[getMonth](me.month-1)},MonthProto[next]=function(){var me=this,year=me[getYearObject]();return me.month===c.MONTH_CNT(me.year)?year[getMonth](1):me.month===months.ELUL?year[next]()[getMonth](TISHREI):year[getMonth](me.month+1)},MonthProto[getDay]=function(day){var days=this.days;return day=c.dayYearNum(day),day>days[length]?this[next]()[getDay](day-days[length]):days[day>0?day-1:days[length]+day]},MonthProto[getYearObject]=function(){return this.__year||new Hebcal(this.year)},MonthProto.getName=function(o){return c.LANG(c.monthNames[+this[isLeapYear]()][this.month],o)},MonthProto.rosh_chodesh=function(){var prevMonth=this[prev]();return 30==prevMonth[length]?[prevMonth[getDay](-1),this[getDay](1)]:[this[getDay](1)]},MonthProto.setCity=function(city){return this.days.forEach(function(d){d.setCity(city);
}),this},MonthProto.setLocation=function(lat,lon){return this.days.forEach(function(d){d.setLocation(lat,lon)}),this},MonthProto[map]=function(){return[][map].apply(this.days,arguments)},MonthProto.molad=function(){var year,m_elapsed,p_elapsed,h_elapsed,parts,m_adj,retMolad={},toInt=parseInt;m_adj=this.month-7,year=this.year-1,m_adj<0&&(m_adj+=c.MONTH_CNT(year+1)),m_elapsed=toInt(m_adj+235*(year/19)),p_elapsed=toInt(204+793*(m_elapsed%1080)),h_elapsed=toInt(5+12*m_elapsed+793*(m_elapsed/1080)-6),parts=toInt(p_elapsed%1080+1080*(h_elapsed%24)),retMolad.doy=new HDate(toInt(1+29*m_elapsed+h_elapsed/24)).getDay(),retMolad.hour=Math.round(h_elapsed%24);var chalakim=toInt(parts%1080);retMolad.minutes=toInt(chalakim/18),retMolad.chalakim=chalakim%18;var day=this.prev().find.strings.shabbat_mevarchim._calc.call(this)[0].onOrAfter(retMolad.doy).greg();return day.setHours(retMolad.hour),day.setMinutes(retMolad.minutes),day.setSeconds(3.33*retMolad.chalakim),retMolad.day=day,retMolad},MonthProto[find]=function find_f(day){var me=this;return"number"==typeof day?[me[getDay](day)]:"string"==typeof day?find_f[strings].call(me,day):Array.isArray(day)?[].concat.apply([],day[map](function(d){return me[find](d)})):day instanceof HDate&&day[getFullYear]()==me.year&&day[getMonth]()==me.month?me[find](day.getDate()):day instanceof Date?me[find](new HDate(day)):[]},MonthProto[find][strings]=function strings(str){var func=strings[str.replace(/\s/g,"_").toLowerCase()];if(func)return func.call(this);try{return this[find](new HDate(str))}catch(e){var num=c.dayYearNum(str);return num?this[find](num):[]}},MonthProto[find][strings].rosh_chodesh=function(){return this.rosh_chodesh()},MonthProto[find][strings].shabbat_mevarchim=function sm(){return this.month===months.ELUL?[]:sm._calc.call(this)},MonthProto[find][strings].shabbat_mevarchim._calc=function(){return this[find](this[getDay](29).onOrBefore(c.days.SAT))},MonthProto[find][strings].shabbos_mevarchim=MonthProto[find][strings].shabbos_mevorchim=MonthProto[find][strings].shabbat_mevarchim,Hebcal.HDate=HDate,HDateProto.getMonthObject=function(){return this.__month||new Month(this[getMonth](),this[getFullYear]())},HDateProto[getYearObject]=function(){return this.getMonthObject()[getYearObject]()},function(){var orig={};[prev,next].forEach(function(func){orig[func]=HDateProto[func],HDateProto[func]=function(){var day=orig[func].call(this);return this.__month?this[getYearObject]()[find](day)[0]:day}})}(),HDateProto.getSedra=function(){var __cache={};return function(o){var sedraYear=__cache[this[getFullYear]()];return sedraYear&&sedraYear.il==this.il||(sedraYear=__cache[this[getFullYear]()]=new Sedra(this[getFullYear](),this.il)),sedraYear.get(this)[map](function(p){return c.LANG(p,o)})}}(),HDateProto.getParsha=HDateProto.getSedra,HDateProto.holidays=function(all){var me=this,days=me[getYearObject]().holidays[me];return days?days.filter(function(h){return!!all||!h.routine()&&h.is(me)})[map](function(h){return h.date.setLocation(me),h}):[]},["candleLighting","havdalah"].forEach(function(prop){HDateProto[prop]=function(){var me=this,hd=me.holidays(!0).filter(function(h){return h.is(me)});return hd.length&&(hd=c.filter(hd.map(function(h){return h[prop]()}),!0)),hd.length?new Date(Math.max.apply(null,hd)):null}}),HDateProto.omer=function(){var me=this,greg=me.greg().getTime(),year=me[getFullYear]();return greg>new HDate(15,NISAN,year).greg().getTime()&&greg<new HDate(6,months.SIVAN,year).greg().getTime()?me.abs()-new HDate(16,NISAN,year).abs()+1:0},HDateProto.dafyomi=function(o){return dafyomi.dafname(dafyomi.dafyomi(this.greg()),o)},HDateProto.tachanun=function(){function tachanun(){function mapAbs(arr){return arr[map](function(d){return d.abs()})}var all,some,yes_prev,checkNext=!arguments[0],me=this,year=me[getYearObject](),y=year.year;if(__cache.il[y]===me.il?(all=__cache.all[y],some=__cache.some[y],yes_prev=__cache.yes_prev[y]):(all=__cache.all[y]=mapAbs(year[find]("Rosh Chodesh").concat(year[find](c.range(1,c.daysInMonth(NISAN,y)),NISAN),year[find](48,NISAN),year[find](c.range(1,8-me.il),months.SIVAN),year[find]([9,15],months.AV),year[find](-1,months.ELUL),year[find]([1,2],TISHREI),year[find](c.range(9,24-me.il),TISHREI),year[find](c.range(25,33),months.KISLEV),year[find](15,months.SHVAT),year[find]([14,15],year[isLeapYear]()?[months.ADAR_I,months.ADAR_II]:months.ADAR_I))),some=__cache.some[y]=mapAbs([].concat(year[find](c.range(1,13),months.SIVAN),year[find](c.range(20,31),TISHREI),year[find](14,months.IYYAR),holidays.atzmaut(y)[1].date||[],y>=5727?year[find](29,months.IYYAR):[])),yes_prev=__cache.yes_prev[y]=mapAbs([].concat(year[find](-1,months.ELUL),year[find](9,months.TISHREI),year[find](14,months.IYYAR))),__cache.il[y]=me.il),all=all.indexOf(me.abs())>-1,some=some.indexOf(me.abs())>-1,yes_prev=yes_prev.indexOf(me.abs()+1)>-1,all)return NONE;var ret=(!some&&ALL_CONGS)|(6!=me[getDay]()&&SHACHARIT);return ret|=checkNext&&!yes_prev?me[next]().tachanun(!0)&SHACHARIT&&MINCHA:5!=me[getDay]()&&MINCHA,ret==ALL_CONGS?NONE:ret}var NONE=tachanun.NONE=0,MINCHA=tachanun.MINCHA=1,SHACHARIT=tachanun.SHACHARIT=2,ALL_CONGS=tachanun.ALL_CONGS=4,__cache={all:{},some:{},yes_prev:{},il:{}};return tachanun}(),HDateProto.hallel=function(){function hallel(){var me=this,year=me[getYearObject](),y=year.year,whole=__cache.il[y]==me.il&&__cache.whole[y]||(__cache.whole[y]=[].concat(year[find](c.range(25,33),months.KISLEV),year[find]([15,me.il?null:16],NISAN),year[find]("Shavuot"),year[find]("Sukkot"),holidays.atzmaut(y)[1].date||[],y>=5727?year[find](29,months.IYYAR):[])[map](function(d){return d.abs()})),half=__cache.il[y]==me.il&&__cache.half[y]||(__cache.half[y]=[].concat(year[find]("Rosh Chodesh").filter(function(rc){return rc[getMonth]()!=TISHREI}),year[find](c.range(17-me.il,23-me.il),NISAN))[map](function(d){return d.abs()}));return __cache.il[y]=me.il,whole.indexOf(me.abs())>-1&&WHOLE||half.indexOf(me.abs())>-1&&HALF||NONE}var NONE=hallel.NONE=0,HALF=hallel.HALF=1,WHOLE=hallel.WHOLE=2,__cache={whole:{},half:{},il:{}};return hallel}(),function(events){function checkTimes(){function close(obj,compare){return c.filter(c[map](obj,function(time){return time-nowGreg}),function(time){return time>0&&time-compare<0})}var now=new HDate;today.isSameDate(now)||(events.emit("dayChange"),today=now);var nowGreg=new Date,almostTime=close(now.getZemanim(),events.beforeZeman),customTimes=close(events.customs,events.refreshInterval);for(var zeman in almostTime)events.emit("almostZeman",zeman,almostTime[zeman]),almostTime[zeman]<events.refreshInterval&&events.emit("atZeman",zeman);for(var custom in customTimes)events.emit("custom",custom)}var refreshInterval,refresh,today=new HDate;defProp(events,"refreshInterval",getset(function(){return refreshInterval},function(ms){refresh&&(refresh=clearInterval(refresh)),refreshInterval=ms,ms&&(refresh=setInterval(checkTimes,ms),refresh.unref&&refresh.unref())})),events.beforeZeman=6e5,checkTimes(),events.refreshInterval=3e5,events.customs={}}(Hebcal.events=new EventEmitter),Hebcal.GregYear=GregYear,GregYearProto[isLeapYear]=function(){return 366==this[length]},GregYearProto.setCity=HebcalProto.setCity,GregYearProto.setLocation=HebcalProto.setLocation,GregYearProto[next]=function(){return new GregYear(this.year+1)},GregYearProto[prev]=function(){return new GregYear(this.year-1)},GregYearProto[getMonth]=function(month){var months=this.months;return month="number"==typeof month?month:greg.lookupMonthNum(month),month>months[length]?this[next]()[getMonth](month-months[length]):months[month>0?month-1:months[length]+month]},extend(GregYearProto,{days:HebcalProto.days,map:HebcalProto[map],filter:HebcalProto.filter,addHoliday:HebcalProto.addHoliday}),Hebcal.GregMonth=GregMonth,GregMonthProto[isLeapYear]=function(){return greg.LEAP(this.year)},GregMonthProto[prev]=function(){return 1===this.month?this[getYearObject]()[prev]()[getMonth](-1):this[getYearObject]()[getMonth](this.month-1)},GregMonthProto[next]=function(){return this[getYearObject]()[getMonth](this.month+1)},GregMonthProto[getDay]=function(day){return day>this.days[length]?this[next]()[getDay](day-this.days[length]):this.days[day>0?day-1:this.days[length]+day]},GregMonthProto[getYearObject]=function(){return this.__year||new GregYear(this.year)},GregMonthProto.getName=function(){return greg.monthNames[this.month]},GregMonthProto.setCity=MonthProto.setCity,GregMonthProto.setLocation=MonthProto.setLocation,GregMonthProto[map]=MonthProto[map],HDateProto.getGregMonthObject=function(){return this.__gregmonth||new GregMonth(this.greg()[getMonth]()+1,this.greg()[getFullYear]())},HDateProto.getGregYearObject=function(){return this.getGregMonthObject()[getYearObject]()},module.exports=Hebcal},{"./cities":1,"./common":3,"./dafyomi":4,"./greg":5,"./hdate":6,"./holidays":8,"./sedra":12,events:9,gematriya:10}],8:[function(require,module,exports){function Chanukah(day){return["Chanukah: Candle "+day,0,"חנוכה: נר "+gematriya(day)]}function CHM(desc){return[desc[0]+' (CH"M)',desc[1]?desc[1]+' (CH"M)':desc[1],desc[2]?desc[2]+' )חה"ם(':desc[2]]}function Sukkot(day){return["Sukkot: "+day,"Succos: "+day,"סוכות יום "+gematriya(day)]}function Pesach(day){return["Pesach: "+day,0,"פסח יום "+gematriya(day)]}function Event(date,desc,mask){var me=this;me.date=new HDate(date),me.desc="object"!=typeof desc?[desc]:desc,me.USER_EVENT=!!(mask&USER_EVENT),me.LIGHT_CANDLES=!!(mask&LIGHT_CANDLES),me.YOM_TOV_ENDS=!!(mask&YOM_TOV_ENDS),me.CHUL_ONLY=!!(mask&CHUL_ONLY),me.IL_ONLY=!!(mask&IL_ONLY),me.LIGHT_CANDLES_TZEIS=!!(mask&LIGHT_CANDLES_TZEIS),me.HOLY_DAY=!!(mask&HOLY_DAY)}var c=require("./common"),HDate=require("./hdate"),gematriya=require("gematriya"),__cache={},dayOnOrBefore=c.dayOnOrBefore,months=c.months,days=c.days,TISHREI=months.TISHREI,KISLEV=months.KISLEV,NISAN=months.NISAN,SAT=days.SAT,getDay="getDay",abs="abs",Shabbat="Shabbat",Shabbos="Shabbos",USER_EVENT=1,LIGHT_CANDLES=2,YOM_TOV_ENDS=4,CHUL_ONLY=8,IL_ONLY=16,LIGHT_CANDLES_TZEIS=32,HOLY_DAY=64;exports.masks={USER_EVENT:USER_EVENT,LIGHT_CANDLES:LIGHT_CANDLES,YOM_TOV_ENDS:YOM_TOV_ENDS,CHUL_ONLY:CHUL_ONLY,IL_ONLY:IL_ONLY,LIGHT_CANDLES_TZEIS:LIGHT_CANDLES_TZEIS,HOLY_DAY:HOLY_DAY},Event.prototype.is=function(date,il){return date=new HDate(date),myDate=this.date,arguments.length<2&&(il=date.il),date.getDate()==myDate.getDate()&&date.getMonth()==myDate.getMonth()&&(date.getFullYear()==myDate.getFullYear()&&!(il&&this.CHUL_ONLY||!il&&this.IL_ONLY))},Event.prototype.masks=function(){var me=this;return(me.USER_EVENT&&USER_EVENT)|(me.LIGHT_CANDLES&&LIGHT_CANDLES)|(me.YOM_TOV_ENDS&&YOM_TOV_ENDS)|(me.CHUL_ONLY&&CHUL_ONLY)|(me.IL_ONLY&&IL_ONLY)|(me.LIGHT_CANDLES_TZEIS&&LIGHT_CANDLES_TZEIS)|(me.HOLY_DAY&&HOLY_DAY)},Event.prototype.getDesc=function(o){return c.LANG(this.desc,o)},Event.prototype.candleLighting=function(){var date=this.date.next();return this.LIGHT_CANDLES?new Date(date.sunset()-60*Event.candleLighting*1e3):this.LIGHT_CANDLES_TZEIS?date.getZemanim().tzeit:null},Event.prototype.havdalah=function(){return this.YOM_TOV_ENDS?new Date(this.date.sunset().getTime()+60*Event.havdalah*1e3):null},Event.prototype.routine=function(){function routine(){return!!~routine.names.indexOf(this.getDesc("s"))}return routine.names=[Shabbat,"Erev "+Shabbat],routine}(),Event.isIL=!1,Event.candleLighting=18,Event.havdalah=42,exports.Event=Event,exports.year=function(year){function add(ev){Array.isArray(ev)?ev.forEach(function(e){add(e)}):h[ev.date]?h[ev.date].push(ev):h[ev.date]=[ev]}if(__cache[year])return __cache[year];var tmpDate,RH=new HDate(1,TISHREI,year),pesach=new HDate(15,NISAN,year),h={};Object.defineProperty(h,"add",{value:add}),add([new Event(RH,["Rosh Hashana 1",0,"ראש השנה א'"],LIGHT_CANDLES_TZEIS|HOLY_DAY),new Event(new HDate(2,TISHREI,year),["Rosh Hashana 2",0,"ראש השנה ב'"],YOM_TOV_ENDS|HOLY_DAY),new Event(new HDate(3+(RH[getDay]()==days.THU),TISHREI,year),["Tzom Gedaliah",0,"צום גדליה"],0),new Event(new HDate(9,TISHREI,year),["Erev Yom Kippur",0,"ערב יום כיפור"],LIGHT_CANDLES),new Event(new HDate(dayOnOrBefore(SAT,7+RH[abs]())),[Shabbat+" Shuva",Shabbos+" Shuvah","שבת שובה"],0),new Event(new HDate(10,TISHREI,year),["Yom Kippur",0,"יום כיפור"],YOM_TOV_ENDS|HOLY_DAY),new Event(new HDate(14,TISHREI,year),["Erev Sukkot","Erev Succos","ערב סוכות"],LIGHT_CANDLES),new Event(new HDate(15,TISHREI,year),Sukkot(1),LIGHT_CANDLES_TZEIS|CHUL_ONLY|HOLY_DAY),new Event(new HDate(15,TISHREI,year),Sukkot(1),YOM_TOV_ENDS|IL_ONLY|HOLY_DAY),new Event(new HDate(16,TISHREI,year),Sukkot(2),YOM_TOV_ENDS|CHUL_ONLY|HOLY_DAY),new Event(new HDate(16,TISHREI,year),CHM(Sukkot(2)),IL_ONLY),new Event(new HDate(17,TISHREI,year),CHM(Sukkot(3)),0),new Event(new HDate(18,TISHREI,year),CHM(Sukkot(4)),0),new Event(new HDate(19,TISHREI,year),CHM(Sukkot(5)),0),new Event(new HDate(20,TISHREI,year),CHM(Sukkot(6)),0),new Event(new HDate(21,TISHREI,year),["Sukkot: 7 (Hoshana Raba)","Succos: 7 (Hoshana Raba)","סוכות יום ז' )הושנע רבה("],LIGHT_CANDLES),new Event(new HDate(22,TISHREI,year),["Shmini Atzeret","Shmini Atzeres","שמיני עצרת"],LIGHT_CANDLES_TZEIS|CHUL_ONLY|HOLY_DAY),new Event(new HDate(22,TISHREI,year),["Shmini Atzeret / Simchat Torah","Shmini Atzeres / Simchas Torah","שמיני עצרת / שמחת תורה"],YOM_TOV_ENDS|IL_ONLY|HOLY_DAY),new Event(new HDate(23,TISHREI,year),["Simchat Torah","Simchas Torah","שמחת תורה"],YOM_TOV_ENDS|CHUL_ONLY|HOLY_DAY),new Event(new HDate(24,KISLEV,year),["Erev Chanukah",0,"ערב חנוכה"],0),new Event(new HDate(25,KISLEV,year),Chanukah(1),0),new Event(new HDate(26,KISLEV,year),Chanukah(2),0),new Event(new HDate(27,KISLEV,year),Chanukah(3),0),new Event(new HDate(28,KISLEV,year),Chanukah(4),0),new Event(new HDate(29,KISLEV,year),Chanukah(5),0),new Event(new HDate(30,KISLEV,year),Chanukah(6),0),new Event(new HDate(31,KISLEV,year),Chanukah(7),0),new Event(new HDate(32,KISLEV,year),Chanukah(8),0),new Event(new HDate(15,months.SHVAT,year),["Tu B'Shvat",0,'ט"ו בשבט'],0),new Event(new HDate(dayOnOrBefore(SAT,pesach[abs]()-43)),[Shabbat+" Shekalim",Shabbos+" Shekalim","שבת שקלים"],0),new Event(new HDate(dayOnOrBefore(SAT,pesach[abs]()-30)),[Shabbat+" Zachor",Shabbos+" Zachor","שבת זכור"],0),new Event(new HDate(pesach[abs]()-(pesach[getDay]()==days.TUE?33:31)),["Ta'anit Esther","Ta'anis Esther","תענית אסתר"],0),new Event(new HDate(13,months.ADAR_II,year),["Erev Purim",0,"ערב פורים"],0),new Event(new HDate(14,months.ADAR_II,year),["Purim",0,"פורים"],0),new Event(new HDate(15,months.ADAR_II,year),["Shushan Purim",0,"שושן פורים"],0),new Event(new HDate(dayOnOrBefore(SAT,pesach[abs]()-14)-7),[Shabbat+" Parah",Shabbos+" Parah","שבת פרה"],0),new Event(new HDate(dayOnOrBefore(SAT,pesach[abs]()-14)),[Shabbat+" Hachodesh",Shabbos+" Hachodesh","שבת החודש"],0),new Event(new HDate(dayOnOrBefore(SAT,pesach[abs]()-1)),[Shabbat+" HaGadol",Shabbos+" HaGadol","שבת הגדול"],0),new Event(pesach.prev()[getDay]()==SAT?pesach.onOrBefore(days.THU):new HDate(14,NISAN,year),["Ta'anit Bechorot","Ta'anis Bechoros","תענית בכורות"],0),new Event(new HDate(14,NISAN,year),["Erev Pesach",0,"ערב פסח"],LIGHT_CANDLES),new Event(new HDate(15,NISAN,year),Pesach(1),LIGHT_CANDLES_TZEIS|CHUL_ONLY|HOLY_DAY),new Event(new HDate(15,NISAN,year),Pesach(1),YOM_TOV_ENDS|IL_ONLY|HOLY_DAY),new Event(new HDate(16,NISAN,year),Pesach(2),YOM_TOV_ENDS|CHUL_ONLY|HOLY_DAY),new Event(new HDate(16,NISAN,year),CHM(Pesach(2)),IL_ONLY),new Event(new HDate(16,NISAN,year),["Start counting Omer",0,"התחלת ספירת העומר"],0),new Event(new HDate(17,NISAN,year),CHM(Pesach(3)),0),new Event(new HDate(18,NISAN,year),CHM(Pesach(4)),0),new Event(new HDate(19,NISAN,year),CHM(Pesach(5)),0),new Event(new HDate(20,NISAN,year),CHM(Pesach(6)),LIGHT_CANDLES),new Event(new HDate(21,NISAN,year),Pesach(7),LIGHT_CANDLES_TZEIS|CHUL_ONLY),new Event(new HDate(21,NISAN,year),Pesach(7),YOM_TOV_ENDS|IL_ONLY|HOLY_DAY),new Event(new HDate(22,NISAN,year),Pesach(8),YOM_TOV_ENDS|CHUL_ONLY|HOLY_DAY),new Event(new HDate(14,months.IYYAR,year),["Pesach Sheni",0,"פסח שני"],0),new Event(new HDate(18,months.IYYAR,year),["Lag B'Omer",0,'ל"ג בעומר'],0),new Event(new HDate(5,months.SIVAN,year),["Erev Shavuot","Erev Shavuos","ערב שבועות"],LIGHT_CANDLES),new Event(new HDate(6,months.SIVAN,year),["Shavuot 1","Shavuos 1","שבועות א'"],LIGHT_CANDLES_TZEIS|CHUL_ONLY|HOLY_DAY),new Event(new HDate(6,months.SIVAN,year),["Shavuot","Shavuos","שבועות"],YOM_TOV_ENDS|IL_ONLY|HOLY_DAY),new Event(new HDate(7,months.SIVAN,year),["Shavuot 2","Shavuos 2","שבועות ב'"],YOM_TOV_ENDS|CHUL_ONLY|HOLY_DAY),new Event(new HDate(dayOnOrBefore(SAT,new HDate(1,TISHREI,year+1)[abs]()-4)),["Leil Selichot","Leil Selichos","ליל סליחות"],0),new Event(new HDate(29,months.ELUL,year),["Erev Rosh Hashana",0,"ערב ראש השנה"],LIGHT_CANDLES)]),tmpDate=new HDate(10,months.TEVET,year),tmpDate[getDay]()==SAT&&(tmpDate=tmpDate.next()),add(new Event(tmpDate,["Asara B'Tevet",0,"עשרה בטבת"],0)),c.LEAP(year)&&(add(new Event(new HDate(14,months.ADAR_I,year),["Purim Katan",0,"פורים קטן"],0)),add(new Event(new HDate(15,months.ADAR_I,year),["Shushan Purim Katan",0,"שושן פורים קטן"],0))),tmpDate=new HDate(17,months.TAMUZ,year),tmpDate[getDay]()==SAT&&(tmpDate=tmpDate.next()),add(new Event(tmpDate,["Shiva-Asar B'Tamuz",0,"צום יז' בתמוז"],0)),tmpDate=new HDate(9,months.AV,year),tmpDate[getDay]()==SAT&&(tmpDate=tmpDate.next()),add(new Event(new HDate(dayOnOrBefore(SAT,tmpDate[abs]())),[Shabbat+" Chazon",Shabbos+" Chazon","שבת חזון"],0)),add(new Event(tmpDate.prev(),["Erev Tish'a B'Av",0,"ערב תשעה באב"],0)),add(new Event(tmpDate,["Tish'a B'Av",0,"תשעה באב"],0)),add(new Event(new HDate(dayOnOrBefore(SAT,tmpDate[abs]()+7)),[Shabbat+" Nachamu",Shabbos+" Nachamu","שבת נחמו"],0));for(var day=6;day<c.daysInYear(year);day+=7)add(new Event(new HDate(dayOnOrBefore(SAT,new HDate(1,TISHREI,year)[abs]()+day)),[Shabbat,Shabbos,"שבת"],YOM_TOV_ENDS|HOLY_DAY)),add(new Event(new HDate(dayOnOrBefore(days.FRI,new HDate(1,TISHREI,year)[abs]()+day)),["Erev "+Shabbat,"Erev "+Shabbos,"ערב שבת"],LIGHT_CANDLES));for(var month=1;month<=c.MONTH_CNT(year);month++)30==(month==NISAN?c.daysInMonth(c.MONTH_CNT(year-1),year-1):c.daysInMonth(month-1,year))?(add(new Event(new HDate(1,month,year),["Rosh Chodesh 2",0,"ראש חודש ב'"],0)),add(new Event(new HDate(30,month-1,year),["Rosh Chodesh 1",0,"ראש חודש א'"],0))):month!==TISHREI&&add(new Event(new HDate(1,month,year),["Rosh Chodesh",0,"ראש חודש"],0)),month!=months.ELUL&&add(new Event(new HDate(29,month,year).onOrBefore(SAT),[Shabbat+" Mevarchim",Shabbos+" Mevorchim","שבת מברכים"],0));return __cache[year]=h}},{"./common":3,"./hdate":6,gematriya:10}],9:[function(require,module,exports){function EventEmitter(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function isFunction(arg){return"function"==typeof arg}function isNumber(arg){return"number"==typeof arg}function isObject(arg){return"object"==typeof arg&&null!==arg}function isUndefined(arg){return void 0===arg}module.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._maxListeners=void 0,EventEmitter.defaultMaxListeners=10,EventEmitter.prototype.setMaxListeners=function(n){if(!isNumber(n)||n<0||isNaN(n))throw TypeError("n must be a positive number");return this._maxListeners=n,this},EventEmitter.prototype.emit=function(type){var er,handler,len,args,i,listeners;if(this._events||(this._events={}),"error"===type&&(!this._events.error||isObject(this._events.error)&&!this._events.error.length)){if(er=arguments[1],er instanceof Error)throw er;var err=new Error('Uncaught, unspecified "error" event. ('+er+")");throw err.context=er,err}if(handler=this._events[type],isUndefined(handler))return!1;if(isFunction(handler))switch(arguments.length){case 1:handler.call(this);break;case 2:handler.call(this,arguments[1]);break;case 3:handler.call(this,arguments[1],arguments[2]);break;default:args=Array.prototype.slice.call(arguments,1),handler.apply(this,args)}else if(isObject(handler))for(args=Array.prototype.slice.call(arguments,1),listeners=handler.slice(),len=listeners.length,i=0;i<len;i++)listeners[i].apply(this,args);return!0},EventEmitter.prototype.addListener=function(type,listener){var m;if(!isFunction(listener))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",type,isFunction(listener.listener)?listener.listener:listener),this._events[type]?isObject(this._events[type])?this._events[type].push(listener):this._events[type]=[this._events[type],listener]:this._events[type]=listener,isObject(this._events[type])&&!this._events[type].warned&&(m=isUndefined(this._maxListeners)?EventEmitter.defaultMaxListeners:this._maxListeners,m&&m>0&&this._events[type].length>m&&(this._events[type].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[type].length),"function"==typeof console.trace&&console.trace())),this},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.once=function(type,listener){function g(){this.removeListener(type,g),fired||(fired=!0,listener.apply(this,arguments))}if(!isFunction(listener))throw TypeError("listener must be a function");var fired=!1;return g.listener=listener,this.on(type,g),this},EventEmitter.prototype.removeListener=function(type,listener){var list,position,length,i;if(!isFunction(listener))throw TypeError("listener must be a function");if(!this._events||!this._events[type])return this;if(list=this._events[type],length=list.length,position=-1,list===listener||isFunction(list.listener)&&list.listener===listener)delete this._events[type],this._events.removeListener&&this.emit("removeListener",type,listener);else if(isObject(list)){for(i=length;i-- >0;)if(list[i]===listener||list[i].listener&&list[i].listener===listener){position=i;break}if(position<0)return this;1===list.length?(list.length=0,delete this._events[type]):list.splice(position,1),this._events.removeListener&&this.emit("removeListener",type,listener)}return this},EventEmitter.prototype.removeAllListeners=function(type){var key,listeners;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[type]&&delete this._events[type],this;if(0===arguments.length){for(key in this._events)"removeListener"!==key&&this.removeAllListeners(key);return this.removeAllListeners("removeListener"),this._events={},this}if(listeners=this._events[type],isFunction(listeners))this.removeListener(type,listeners);else if(listeners)for(;listeners.length;)this.removeListener(type,listeners[listeners.length-1]);return delete this._events[type],this},EventEmitter.prototype.listeners=function(type){var ret;return ret=this._events&&this._events[type]?isFunction(this._events[type])?[this._events[type]]:this._events[type].slice():[]},EventEmitter.prototype.listenerCount=function(type){if(this._events){var evlistener=this._events[type];if(isFunction(evlistener))return 1;if(evlistener)return evlistener.length}return 0},EventEmitter.listenerCount=function(emitter,type){return emitter.listenerCount(type)}},{}],10:[function(require,module,exports){!function(){function gematriya(num,limit){if("number"!=typeof num&&"string"!=typeof num)throw new TypeError("non-number or string given to gematriya()");var str="string"==typeof num;return str&&(num=num.replace(/('|")/g,"")),num=num.toString().split("").reverse(),!str&&limit&&(num=num.slice(0,limit)),num=num.map(function g(n,i){return str?limit&&numbers[n]<numbers[num[i-1]]&&numbers[n]<100?1e3*numbers[n]:numbers[n]:parseInt(n,10)*Math.pow(10,i)>1e3?g(n,i-3):letters[parseInt(n,10)*Math.pow(10,i)]}),str?num.reduce(function(o,t){return o+t},0):(num=num.reverse().join("").replace(/יה/g,"טו").replace(/יו/g,"טז").split(""),1===num.length?num.push("'"):num.length>1&&num.splice(-1,0,'"'),num.join(""))}var i,letters={},numbers={"":0,"א":1,"ב":2,"ג":3,"ד":4,"ה":5,"ו":6,"ז":7,"ח":8,"ט":9,"י":10,"כ":20,"ל":30,"מ":40,"נ":50,"ס":60,"ע":70,"פ":80,"צ":90,"ק":100,"ר":200,"ש":300,"ת":400,"תק":500,"תר":600,"תש":700,"תת":800,"תתק":900,"תתר":1e3};for(i in numbers)letters[numbers[i]]=i;"undefined"!=typeof module?module.exports=gematriya:window.gematriya=gematriya}()},{}],11:[function(require,module,exports){!function(){"use strict";function toJulian(date){return date.valueOf()/dayMs-.5+J1970}function fromJulian(j){return new Date((j+.5-J1970)*dayMs)}function toDays(date){return toJulian(date)-J2000}function rightAscension(l,b){return atan(sin(l)*cos(e)-tan(b)*sin(e),cos(l))}function declination(l,b){return asin(sin(b)*cos(e)+cos(b)*sin(e)*sin(l))}function azimuth(H,phi,dec){return atan(sin(H),cos(H)*sin(phi)-tan(dec)*cos(phi))}function altitude(H,phi,dec){return asin(sin(phi)*sin(dec)+cos(phi)*cos(dec)*cos(H))}function siderealTime(d,lw){return rad*(280.16+360.9856235*d)-lw}function astroRefraction(h){return h<0&&(h=0),2967e-7/Math.tan(h+.00312536/(h+.08901179))}function solarMeanAnomaly(d){return rad*(357.5291+.98560028*d)}function eclipticLongitude(M){var C=rad*(1.9148*sin(M)+.02*sin(2*M)+3e-4*sin(3*M)),P=102.9372*rad;return M+C+P+PI}function sunCoords(d){var M=solarMeanAnomaly(d),L=eclipticLongitude(M);return{dec:declination(L,0),ra:rightAscension(L,0)}}function julianCycle(d,lw){return Math.round(d-J0-lw/(2*PI))}function approxTransit(Ht,lw,n){return J0+(Ht+lw)/(2*PI)+n}function solarTransitJ(ds,M,L){return J2000+ds+.0053*sin(M)-.0069*sin(2*L)}function hourAngle(h,phi,d){return acos((sin(h)-sin(phi)*sin(d))/(cos(phi)*cos(d)))}function getSetJ(h,lw,phi,dec,n,M,L){var w=hourAngle(h,phi,dec),a=approxTransit(w,lw,n);return solarTransitJ(a,M,L)}function moonCoords(d){var L=rad*(218.316+13.176396*d),M=rad*(134.963+13.064993*d),F=rad*(93.272+13.22935*d),l=L+6.289*rad*sin(M),b=5.128*rad*sin(F),dt=385001-20905*cos(M);return{ra:rightAscension(l,b),dec:declination(l,b),dist:dt}}function hoursLater(date,h){return new Date(date.valueOf()+h*dayMs/24)}var PI=Math.PI,sin=Math.sin,cos=Math.cos,tan=Math.tan,asin=Math.asin,atan=Math.atan2,acos=Math.acos,rad=PI/180,dayMs=864e5,J1970=2440588,J2000=2451545,e=23.4397*rad,SunCalc={};SunCalc.getPosition=function(date,lat,lng){var lw=rad*-lng,phi=rad*lat,d=toDays(date),c=sunCoords(d),H=siderealTime(d,lw)-c.ra;return{azimuth:azimuth(H,phi,c.dec),altitude:altitude(H,phi,c.dec)}};var times=SunCalc.times=[[-.833,"sunrise","sunset"],[-.3,"sunriseEnd","sunsetStart"],[-6,"dawn","dusk"],[-12,"nauticalDawn","nauticalDusk"],[-18,"nightEnd","night"],[6,"goldenHourEnd","goldenHour"]];SunCalc.addTime=function(angle,riseName,setName){times.push([angle,riseName,setName])};var J0=9e-4;SunCalc.getTimes=function(date,lat,lng){var i,len,time,Jset,Jrise,lw=rad*-lng,phi=rad*lat,d=toDays(date),n=julianCycle(d,lw),ds=approxTransit(0,lw,n),M=solarMeanAnomaly(ds),L=eclipticLongitude(M),dec=declination(L,0),Jnoon=solarTransitJ(ds,M,L),result={solarNoon:fromJulian(Jnoon),nadir:fromJulian(Jnoon-.5)};for(i=0,len=times.length;i<len;i+=1)time=times[i],Jset=getSetJ(time[0]*rad,lw,phi,dec,n,M,L),Jrise=Jnoon-(Jset-Jnoon),result[time[1]]=fromJulian(Jrise),result[time[2]]=fromJulian(Jset);return result},SunCalc.getMoonPosition=function(date,lat,lng){var lw=rad*-lng,phi=rad*lat,d=toDays(date),c=moonCoords(d),H=siderealTime(d,lw)-c.ra,h=altitude(H,phi,c.dec),pa=atan(sin(H),tan(phi)*cos(c.dec)-sin(c.dec)*cos(H));return h+=astroRefraction(h),{azimuth:azimuth(H,phi,c.dec),altitude:h,distance:c.dist,parallacticAngle:pa}},SunCalc.getMoonIllumination=function(date){var d=toDays(date||new Date),s=sunCoords(d),m=moonCoords(d),sdist=149598e3,phi=acos(sin(s.dec)*sin(m.dec)+cos(s.dec)*cos(m.dec)*cos(s.ra-m.ra)),inc=atan(sdist*sin(phi),m.dist-sdist*cos(phi)),angle=atan(cos(s.dec)*sin(s.ra-m.ra),sin(s.dec)*cos(m.dec)-cos(s.dec)*sin(m.dec)*cos(s.ra-m.ra));return{fraction:(1+cos(inc))/2,phase:.5+.5*inc*(angle<0?-1:1)/Math.PI,angle:angle}},SunCalc.getMoonTimes=function(date,lat,lng,inUTC){var t=new Date(date);inUTC?t.setUTCHours(0,0,0,0):t.setHours(0,0,0,0);for(var h1,h2,rise,set,a,b,xe,ye,d,roots,x1,x2,dx,hc=.133*rad,h0=SunCalc.getMoonPosition(t,lat,lng).altitude-hc,i=1;i<=24&&(h1=SunCalc.getMoonPosition(hoursLater(t,i),lat,lng).altitude-hc,h2=SunCalc.getMoonPosition(hoursLater(t,i+1),lat,lng).altitude-hc,a=(h0+h2)/2-h1,b=(h2-h0)/2,xe=-b/(2*a),ye=(a*xe+b)*xe+h1,d=b*b-4*a*h1,roots=0,d>=0&&(dx=Math.sqrt(d)/(2*Math.abs(a)),x1=xe-dx,x2=xe+dx,Math.abs(x1)<=1&&roots++,Math.abs(x2)<=1&&roots++,x1<-1&&(x1=x2)),1===roots?h0<0?rise=i+x1:set=i+x1:2===roots&&(rise=i+(ye<0?x2:x1),set=i+(ye<0?x1:x2)),!rise||!set);i+=2)h0=h2;var result={};return rise&&(result.rise=hoursLater(t,rise)),set&&(result.set=hoursLater(t,set)),rise||set||(result[ye>0?"alwaysUp":"alwaysDown"]=!0),result},"object"==typeof exports&&"undefined"!=typeof module?module.exports=SunCalc:"function"==typeof define&&define.amd?define(SunCalc):window.SunCalc=SunCalc}()},{}],12:[function(require,module,exports){function Sedra(hebYr,il){il=!!il;var type,long_c=c.lngChesh(hebYr),short_k=c.shrtKis(hebYr);this.year=hebYr,type=long_c&&!short_k?COMPLETE:!long_c&&short_k?INCOMPLETE:REGULAR;var rosh_hashana=new HDate(1,c.months.TISHREI,hebYr).abs(),rosh_hashana_day=rosh_hashana%7+1;this.first_saturday=c.dayOnOrBefore(6,rosh_hashana+6);var leap=+c.LEAP(hebYr);this.type=type,this.rosh_hashana_day=rosh_hashana_day,this.leap=leap,this.il=il;var core=""+leap+rosh_hashana_day+type;if(types[core]?this.theSedraArray=types[core]:this.theSedraArray=types[core+ +il],!this.theSedraArray)throw console.log(this),new TypeError("improper sedra year type calculated.")}function D(p){return-p}function abs(year,absDate){absDate=c.dayOnOrBefore(6,absDate+6);var weekNum=(absDate-year.first_saturday)/7,index=year.theSedraArray[weekNum];return void 0===index?abs(new Sedra(year.year+1,year.il),absDate):"object"==typeof index?[index]:index>=0?[parshiot[index]]:(index=D(index),[parshiot[index],parshiot[index+1]])}var c=require("./common"),HDate=require("./hdate"),concat="concat",range=c.range,INCOMPLETE=0,REGULAR=1,COMPLETE=2,parshiot=Sedra.parshiot=[["Bereshit","Bereshis","בראשית"],["Noach",0,"נח"],["Lech-Lecha",0,"לך-לך"],["Vayera",0,"וירא"],["Chayei Sara",0,"חי שרה"],["Toldot","Toldos","תולדות"],["Vayetzei",0,"ויצא"],["Vayishlach",0,"וישלח"],["Vayeshev",0,"וישב"],["Miketz",0,"מקץ"],["Vayigash",0,"ויגש"],["Vayechi",0,"ויחי"],["Shemot","Shemos","שמות"],["Vaera",0,"וארא"],["Bo",0,"בא"],["Beshalach",0,"בשלח"],["Yitro","Yisro","יתרו"],["Mishpatim",0,"משפטים"],["Terumah",0,"תרומה"],["Tetzaveh",0,"תצוה"],["Ki Tisa","Ki Sisa","כי תשא"],["Vayakhel",0,"ויקהל"],["Pekudei",0,"פקודי"],["Vayikra",0,"ויקרא"],["Tzav",0,"צו"],["Shmini",0,"שמיני"],["Tazria",0,"תזריע"],["Metzora",0,"מצרע"],["Achrei Mot","Achrei Mos","אחרי מות"],["Kedoshim",0,"קדשים"],["Emor",0,"אמור"],["Behar",0,"בהר"],["Bechukotai","Bechukosai","בחקתי"],["Bamidbar",0,"במדבר"],["Nasso",0,"נשא"],["Beha'alotcha","Beha'aloscha","בהעלתך"],["Sh'lach",0,"שלח לך"],["Korach",0,"קורח"],["Chukat","Chukas","חקת"],["Balak",0,"בלק"],["Pinchas",0,"פינחס"],["Matot","Matos","מטות"],["Masei",0,"מסעי"],["Devarim",0,"דברים"],["Vaetchanan","V'eschanan","ואתחנן"],["Eikev",0,"עקב"],["Re'eh",0,"ראה"],["Shoftim",0,"שופטים"],["Ki Teitzei","Ki Seitzei","כי תצא"],["Ki Tavo","Ki Savo","כי תבוא"],["Nitzavim",0,"נצבים"],["Vayeilech",0,"וילך"],["Ha'Azinu",0,"האזינו"]],RH=[["Rosh Hashana",0,"ראש השנה"]],YK=[["Yom Kippur",0,"יום כיפור"]],SUKKOT=[["Sukkot","Succos","סוכות"]],CHMSUKOT=[["Chol hamoed Sukkot","Chol hamoed Succos","חול המועד סוכות"]],SHMINI=[["Shmini Atzeret","Shmini Atzeres","שמיני עצרת"]],EOY=[["End-of-Year: Simchat-Torah, Sukkot","Simchas-Torah, Succos","סוכות ושמחת תורה"]],PESACH=[["Pesach",0,"פסח"]],CHMPESACH=[["Chol hamoed Pesach",0,"חול המועד פסח"]],PESACH7=[["Second days of Pesach",0,"שביעי של פסח"]],SHAVUOT=[["Shavuot","Shavuos","שבועות"]],types={"020":[51,52][concat](EOY,range(0,20),D(21),23,24,PESACH,25,D(26),D(28),30,D(31),range(33,40),D(41),range(43,49),D(50)),"0220":[51,52][concat](EOY,range(0,20),D(21),23,24,PESACH,25,D(26),D(28),30,D(31),33,SHAVUOT,range(34,37),D(38),40,D(41),range(43,49),D(50)),
"0510":[52][concat](YK,EOY,range(0,20),D(21),23,24,PESACH,PESACH,25,D(26),D(28),30,D(31),range(33,40),D(41),range(43,50)),"0511":[52][concat](YK,EOY,range(0,20),D(21),23,24,PESACH,25,D(26),D(28),range(30,40),D(41),range(43,50)),"052":[52][concat](YK,CHMSUKOT,range(0,24),PESACH7,25,D(26),D(28),30,D(31),range(33,40),D(41),range(43,50)),"070":[][concat](RH,52,SUKKOT,SHMINI,range(0,20),D(21),23,24,PESACH7,25,D(26),D(28),30,D(31),range(33,40),D(41),range(43,50)),"072":[][concat](RH,52,SUKKOT,SHMINI,range(0,20),D(21),23,24,CHMPESACH,25,D(26),D(28),30,D(31),range(33,40),D(41),range(43,49),D(50)),1200:[51,52][concat](CHMSUKOT,range(0,27),CHMPESACH,range(28,33),SHAVUOT,range(34,37),D(38),40,D(41),range(43,49),D(50)),1201:[51,52][concat](CHMSUKOT,range(0,27),CHMPESACH,range(28,40),D(41),range(43,49),D(50)),1220:[51,52][concat](CHMSUKOT,range(0,27),PESACH,PESACH,range(28,40),D(41),range(43,50)),1221:[51,52][concat](CHMSUKOT,range(0,27),PESACH,range(28,50)),150:[52][concat](YK,CHMSUKOT,range(0,28),PESACH7,range(29,50)),152:[52][concat](YK,CHMSUKOT,range(0,28),CHMPESACH,range(29,49),D(50)),170:[][concat](RH,52,SUKKOT,SHMINI,range(0,27),CHMPESACH,range(28,40),D(41),range(43,49),D(50)),1720:[][concat](RH,52,SUKKOT,SHMINI,range(0,27),CHMPESACH,range(28,33),SHAVUOT,range(34,37),D(38),40,D(41),range(43,49),D(50))};types["0221"]=types["020"],types["0310"]=types["0220"],types["0311"]=types["020"],types[1310]=types[1220],types[1311]=types[1221],types[1721]=types[170],Sedra.prototype.get=function(hDate){return abs(this,hDate.abs())},module.exports=Sedra},{"./common":3,"./hdate":6}]},{},[2]);
//# sourceMappingURL=client/hebcal.min.js.map